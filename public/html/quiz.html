<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FaceBork</title>
    <meta name="keywords" content="dogs, match, home, dogcare, tindog">
    <link rel="stylesheet" href="./stylesheets/style.css">
    <script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
    <!-- Modal -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-modal/0.9.1/jquery.modal.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-modal/0.9.1/jquery.modal.min.css" />
    <style>
        #sidenav {display: none;}
        #loading {display: none;}
    </style>
    <script>
        var openMenu = false;
        $(document).ready(() => {
            $("#hamburger").click(menuslide);
            $("#closeMenu").click(menuslide);
            $("#sidenav").slideUp();
        });
        function menuslide () {
            if (!openMenu) {
                $("#hamburger").attr("src", "./images/openmenu.png");
                $("#sidenav").slideDown()
            } else {
                $("#hamburger").attr("src", "./images/menu.png");
                $("#sidenav").slideUp()
            }
            openMenu = !openMenu;
        }
    </script>
</head>

<body>
    <header>
        <div class="logoBar">
            <div class="box">
                <a href="index.html"><img src="./images/logo.png"></a>
            </div>
            <div class="box">
                <h3>FaceBork</h3>
            </div>
        </div>
        <div class="nav">
            <div class="box">
                <img id="hamburger" style="height: 2em" src="./images/menu.png">
            </div>
            <div class="box">
                <a href="index.html"><h4>Chat</h4></a>
            </div>
            <div class="box">
                <a href="store.html"><h4>Barketplace</h4></a>
            </div>
            <div class="box">
                <a href="quiz.html"><h4>Quiz</h4></a>
            </div>
        </div>
        <div id="sidenav">
            <a href="index.html">Chat</a>
            <br>
            <a href="store.html">Barketplace</a>
            <br>
            <a href="quiz.html">Quiz</a>
            <br>
            <button id="closeMenu">&times;</button>
        </div>
    </header>
    
        
    
    
    <br/><br/><br/><br/><br/>
    <h1 style="font-size: 35px">Which dog breed is right for you?</h1>
    
    
    
    <br/><br/>
    
    <div id="quiz" style="color: #fff; margin-left: 3em"></div>
    
    
    <br/>
    <button id="submit" style = "margin-left: 3em">Find My Match!</button>
    
    <br/><br/><br/><br/>
    
    
    <div id="quizResults" style="color: #fff; margin-left: 3em; font-size: 20px"></div>


    <br/><br/><br/><br/>
    
    
    
    <script language="javascript">
        function createQuiz() {
            var output = [];
            
            quizQuestions.forEach((curr, questionNum) => {
                var options = [];
                
                for (choice in curr.options) {
                    options.push(
                    `<label>
                    <input type = "radio" name = "question${questionNum}" value = "${choice}">
                    ${curr.options[choice]}
                    <br/>
                    </label>`
                    );
                }
                
                output.push(
                    `<div class="question" style="font-size: 20px"> ${curr.question} </div>
                    <br/>
                    <div class="choices"> ${options.join('')} </div>
                    <br/><br/><br/>`
                );                                    
            });            
            
            //document.write(output);            
            quizText.innerHTML = output.join('');            
        }
        
        
        function processResults() {
            // get answers from quiz
            var answerResults = quizText.querySelectorAll(".choices");
            
            const dogBreeds = ["Labrador Retriever", "Beagle", "Chihuahua", 
            "Australian Shepherd", "Bernese Mountain Dog", "Bulldog", "Corgi",
            "Golden Retriever", "Poodle"];
            var breedCount = [0, 0, 0, 0, 0, 0, 0, 0, 0];
            var userSelection = [];


            quizQuestions.forEach((curr, questionNum) => {                

                // find selected answer
                var answerChosen = answerResults[questionNum];
                var selection = `input[name = question${questionNum}]:checked`;
                var userAnswer = (answerChosen.querySelector(selection) || {}).value;
                
                //alert(userAnswer);
                
                var dogAnswer = curr.outcome[userAnswer];
                //alert(dogAnswer);
                
                dogBreeds.forEach((currBreed, index) => {
                    if (dogAnswer == currBreed) {
                        breedCount[index]++;
                        if (!userSelection.includes(currBreed)) {
                            userSelection.push(currBreed);
                        }
                        
                    }
                    
                });
                
            });
            
            var matchIndex = 0;
            
            breedCount.forEach((count, index) => {                
                if (count > breedCount[matchIndex]) {
                    matchIndex = index;
                }
                
            });
            
            var finalOutput = "Based on your quiz results, your best match is the... "
            + "<strong><em>" + dogBreeds[matchIndex] + "</em></strong>" + "!<br/><br/>";
            
            finalOutput += "During your quiz, you matched with the following dog breeds:";            
            finalOutput += "<ul>";
            userSelection.forEach((dog) => {
                finalOutput += `<li>${dog}</li>`;
            });
            finalOutput += "</ul>";

            resultsText.innerHTML = finalOutput;
    
        }
        
        
        
        const quizQuestions = [
            {
                question: "How active are you?",
                options: 
                    {
                        a: "I love to get outside and move around as much as possible!",
                        b: "I enjoy light exercise, but staying at home is more my style.",
                        c: "I'm a homebody through and through.",
                    },
                outcome:
                    {
                        a: "Labrador Retriever",
                        b: "Beagle",
                        c: "Chihuahua",
                    }
            },
            {
                question: "What level of engagement suits you best?",
                options: 
                    {
                        a: "I'd like my dog to be full of energy.",
                        b: "A little bit of excitement here and there sounds fun!",
                        c: "I'd prefer a dog that is quiet and relaxed.",
                    },
                outcome:
                    {
                        a: "Australian Shepherd",
                        b: "Bernese Mountain Dog",
                        c: "Bulldog",
                    }
            },
            {
                question: "What's your home environment like?",
                options: 
                    {
                        a: "I live by myself.",
                        b: "I live with other adults and/or teenage children.",
                        c: "I live with small children.",
                    },
                outcome:
                    {
                        a: "Corgi",
                        b: "Beagle",
                        c: "Golden Retriever",
                    }
            },
            {
                question: "How much time can you devote to a dog?",
                options: 
                    {
                        a: "I'll be home often, so several hours each day.",
                        b: "I'm gone during the day, but I have a handful of hours at home.",
                        c: "I don't have much time at home.",
                    },
                outcome:
                    {
                        a: "Labrador Retriever",
                        b: "Poodle",
                        c: "Chihuahua",
                    }
            },
            {
                question: "How do you feel about grooming?",
                options: 
                    {
                        a: "Fluffier dogs make for better cuddles!",
                        b: "I can handle a bit of maintenance, but nothing extreme!",
                        c: "I can't handle a dog that sheds.",
                    },
                outcome:
                    {
                        a: "Golden Retriever",
                        b: "Bulldog",
                        c: "Poodle",
                    }
            },
            {
                question: "How do you feel about size?",
                options: 
                    {
                        a: "The bigger the dog, the better.",
                        b: "I don't want a lapdog, but I don't want anything too huge.",
                        c: "A small dog would be my best companion.",
                    },
                outcome:
                    {
                        a: "Bernese Mountain Dog",
                        b: "Australian Shepherd",
                        c: "Corgi",
                    }            
            }
        ];
        
        
        var quizText = document.getElementById("quiz");
        var resultsText = document.getElementById("quizResults");
        var submitButton = document.getElementById("submit");
        
        
        // get quiz structured
        createQuiz();        
        
        // on submit, show results
        submitButton.addEventListener("click", processResults);
        
        
    </script>
    
</body>

</html>